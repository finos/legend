"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8778],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>k});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,i=e.originalType,p=e.parentName,u=r(e,["components","mdxType","originalType","parentName"]),d=s(a),m=l,k=d["".concat(p,".").concat(m)]||d[m]||c[m]||i;return a?n.createElement(k,o(o({ref:t},u),{},{components:a})):n.createElement(k,o({ref:t},u))}));function k(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var i=a.length,o=new Array(i);o[0]=m;var r={};for(var p in t)hasOwnProperty.call(t,p)&&(r[p]=t[p]);r.originalType=e,r[d]="string"==typeof e?e:l,o[1]=r;for(var s=2;s<i;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},8230:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>p,default:()=>k,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var n=a(7462),l=a(3366),i=(a(7294),a(3905)),o=["components"],r={id:"studio-relational-mapping",title:"Connect to Databases",sidebar_label:"Connect Model to Data"},p=void 0,s={unversionedId:"tutorials/studio-relational-mapping",id:"tutorials/studio-relational-mapping",title:"Connect to Databases",description:"Create a Relational Database Schema",source:"@site/../docs/tutorials/studio-relational-mapping.md",sourceDirName:"tutorials",slug:"/tutorials/studio-relational-mapping",permalink:"/docs/tutorials/studio-relational-mapping",draft:!1,tags:[],version:"current",frontMatter:{id:"studio-relational-mapping",title:"Connect to Databases",sidebar_label:"Connect Model to Data"},sidebar:"docs",previous:{title:"Connect Model to Model",permalink:"/docs/tutorials/studio-m2m-mapping"},next:{title:"Runtime",permalink:"/docs/tutorials/services-runtime"}},u={},d=[{value:"Create a Relational Database Schema",id:"create-a-relational-database-schema",level:2},{value:"Create a Relational Mapping",id:"create-a-relational-mapping",level:2},{value:"Define the Relational Mapping",id:"define-the-relational-mapping",level:3},{value:"Execute the Relational Mapping",id:"execute-the-relational-mapping",level:4},{value:"Create Relational Mapping Test",id:"create-relational-mapping-test",level:4},{value:"Create a Connection",id:"create-a-connection",level:2},{value:"Database type",id:"database-type",level:3},{value:"Datasource",id:"datasource",level:3},{value:"H2",id:"h2",level:4},{value:"H2 Embedded",id:"h2-embedded",level:4},{value:"Static",id:"static",level:4},{value:"Snowflake",id:"snowflake",level:4},{value:"BigQuery",id:"bigquery",level:4},{value:"Authentication",id:"authentication",level:3},{value:"H2 Default",id:"h2-default",level:4},{value:"Snowflake Public",id:"snowflake-public",level:4},{value:"Gcp Application Default Credentials",id:"gcp-application-default-credentials",level:4},{value:"Username password",id:"username-password",level:4},{value:"Create a Runtime",id:"create-a-runtime",level:2},{value:"More",id:"more",level:2}],c={toc:d},m="wrapper";function k(e){var t=e.components,a=(0,l.Z)(e,o);return(0,i.kt)(m,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"create-a-relational-database-schema"},"Create a Relational Database Schema"),(0,i.kt)("p",null,"Define the schema definition of the relational database you wish to connect to the data model."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Hit the ",(0,i.kt)("kbd",null,"+")," icon."),(0,i.kt)("li",{parentName:"ol"},"Select ",(0,i.kt)("kbd",null,"New Relational Database"),"."),(0,i.kt)("li",{parentName:"ol"},"Enter the name of the Database, for example ",(0,i.kt)("kbd",null,"H2DemoDataBase"),".")),(0,i.kt)("p",null,"The Studio form mode currently does not support defining the Relational Database schema. Please select ",(0,i.kt)("kbd",null,"Edit in text mode")," to continue."),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},"Define the database by adding tables, columns and joins.")),(0,i.kt)("p",null,"Please refer to below sample SQL snippet to set up a in-memory H2 demo database."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"###Relational\nDatabase demo::H2DemoDataBase\n(\nTable FirmTable\n(\nid INTEGER PRIMARY KEY,\nlegal_name VARCHAR(200)\n)\nTable EmployeeTable\n(\nid INTEGER PRIMARY KEY,\nfirm_id INTEGER,\nfull_name VARCHAR(200),\ncountry_id INTEGER\n)\nTable CountryTable\n(\nid INTEGER PRIMARY KEY,\ncountry_name VARCHAR(200)\n)\n\nJoin FirmEmployee(EmployeeTable.firm_id = FirmTable.id)\nJoin EmployeeCountry(EmployeeTable.country_id = CountryTable.id)\n)\n")),(0,i.kt)("h2",{id:"create-a-relational-mapping"},"Create a Relational Mapping"),(0,i.kt)("p",null,"Map the columns of your relational tables to the properties defined in the data model."),(0,i.kt)("h3",{id:"define-the-relational-mapping"},"Define the Relational Mapping"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Hit the ",(0,i.kt)("kbd",null,"+")," icon."),(0,i.kt)("li",{parentName:"ol"},"Select ",(0,i.kt)("kbd",null,"New mapping")),(0,i.kt)("li",{parentName:"ol"},"Enter the name of the Mapping, for example ",(0,i.kt)("kbd",null,"DemoRelationalMapping"),"."),(0,i.kt)("li",{parentName:"ol"},"Define the mapping target: Drag a class into the editor where it says ",(0,i.kt)("kbd",null,"Add a mapping element")," for example the ",(0,i.kt)("inlineCode",{parentName:"li"},"Firm")," class. Then select",(0,i.kt)("kbd",null,"Create"),"."),(0,i.kt)("li",{parentName:"ol"},"Define the mapping source: Drag the ",(0,i.kt)("kbd",null,"H2DemoDataBase")," Relational Database in the editor where it says ",(0,i.kt)("kbd",null,"Choose a source"),"."),(0,i.kt)("li",{parentName:"ol"},"Choose the table specified in the Relational Database schema that contains the columns you wish to map to your data model properties. Let's choose the ",(0,i.kt)("strong",{parentName:"li"},"FirmTable"),"."),(0,i.kt)("li",{parentName:"ol"},"Map the column names on the left-hand side to the property names in the center of the editor screen. Let's map the ",(0,i.kt)("strong",{parentName:"li"},"legal_name")," column to the ",(0,i.kt)("strong",{parentName:"li"},"legalName")," property.")),(0,i.kt)("h4",{id:"execute-the-relational-mapping"},"Execute the Relational Mapping"),(0,i.kt)("p",null,"To ensure that the mapping has been done correctly and the desired data is actually returned, let's execute the relational mapping."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Right click on the class you wish to test execution for. Let's aim to query Firm data by right-clicking on the ",(0,i.kt)("inlineCode",{parentName:"li"},"Firm")," class and selecting ",(0,i.kt)("kbd",null,"Execute"),"."),(0,i.kt)("li",{parentName:"ol"},"Hit the ",(0,i.kt)("kbd",null,"Edit query")," button to define your test query."),(0,i.kt)("li",{parentName:"ol"},"Create test data either from SQL or csv."),(0,i.kt)("li",{parentName:"ol"},"Hit the ",(0,i.kt)("kbd",null,"Execute")," button to test execution.")),(0,i.kt)("h4",{id:"create-relational-mapping-test"},"Create Relational Mapping Test"),(0,i.kt)("p",null,"It is good practice to define tests for each of your relational mappings. That way, changes to the model and mappings can be performed more safely."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Right click on the class you wish to set up the test for. Let's set up a test for the ",(0,i.kt)("inlineCode",{parentName:"li"},"Firm")," class by right-clicking on it and selecting ",(0,i.kt)("kbd",null,"Test"),"."),(0,i.kt)("li",{parentName:"ol"},"Alternatively, you can select the ",(0,i.kt)("kbd",null,"+")," icon where it says ",(0,i.kt)("kbd",null,"Let's add some tests!"),". Select the class from the dropdown you wish to create the test for."),(0,i.kt)("li",{parentName:"ol"},"Hit the ",(0,i.kt)("kbd",null,"Edit query")," button to define your test query."),(0,i.kt)("li",{parentName:"ol"},"Create test data either from SQL or csv."),(0,i.kt)("li",{parentName:"ol"},"Hit the ",(0,i.kt)("kbd",null,"Execute")," button to test execution.")),(0,i.kt)("p",null,"You can test all the queries and relational mappings at once by hitting the ",(0,i.kt)("kbd",null,"Run all tests")," button."),(0,i.kt)("h2",{id:"create-a-connection"},"Create a Connection"),(0,i.kt)("p",null,"Define the Connection details between the relational database and the data model."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Hit the ",(0,i.kt)("kbd",null,"+")," icon."),(0,i.kt)("li",{parentName:"ol"},"Select ",(0,i.kt)("kbd",null,"New connection")),(0,i.kt)("li",{parentName:"ol"},"Enter the name of the Connection, for example ",(0,i.kt)("kbd",null,"H2DemoConnection"),"."),(0,i.kt)("li",{parentName:"ol"},"Select ",(0,i.kt)("kbd",null,"Relational")," Model Connection")),(0,i.kt)("p",null,"Start entering the Connection details in the ",(0,i.kt)("kbd",null,"General")," tab. First, choose the ",(0,i.kt)("kbd",null,"Database type"),"."),(0,i.kt)("h3",{id:"database-type"},"Database type"),(0,i.kt)("p",null,"Specify the type of relational database you wish to connect to. Studio currently supports:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"H2 (in-memory test database)"),(0,i.kt)("li",{parentName:"ul"},"Snowflake"),(0,i.kt)("li",{parentName:"ul"},"BigQuery")),(0,i.kt)("h3",{id:"datasource"},"Datasource"),(0,i.kt)("p",null,"Specify the connection details of your selected database type."),(0,i.kt)("h4",{id:"h2"},"H2"),(0,i.kt)("p",null,"To execute against an in-memory H2 test data base, you would need to define test data by adding SQL to ",(0,i.kt)("kbd",null,"Test data setup SQL"),"."),(0,i.kt)("h4",{id:"h2-embedded"},"H2 Embedded"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Coming soon.")),(0,i.kt)("h4",{id:"static"},"Static"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Coming soon.")),(0,i.kt)("p",null,"Specify Static connection details by adding the below details."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Host"),(0,i.kt)("li",{parentName:"ul"},"port"),(0,i.kt)("li",{parentName:"ul"},"Database")),(0,i.kt)("h4",{id:"snowflake"},"Snowflake"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Coming soon.")),(0,i.kt)("p",null,"Specify Snowflake connection details by adding the below details."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Account"),(0,i.kt)("li",{parentName:"ul"},"Region"),(0,i.kt)("li",{parentName:"ul"},"Warehouse"),(0,i.kt)("li",{parentName:"ul"},"Database"),(0,i.kt)("li",{parentName:"ul"},"Cloud type")),(0,i.kt)("h4",{id:"bigquery"},"BigQuery"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Coming soon.")),(0,i.kt)("p",null,"Specify BigQuery connection details by adding the below details."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Project id"),(0,i.kt)("li",{parentName:"ul"},"Default dataset")),(0,i.kt)("h3",{id:"authentication"},"Authentication"),(0,i.kt)("p",null,"Define how access to the database should be authenticated in the ",(0,i.kt)("strong",{parentName:"p"},"Authentication")," specifications."),(0,i.kt)("h4",{id:"h2-default"},"H2 Default"),(0,i.kt)("p",null,"No further input needed if you select the ",(0,i.kt)("strong",{parentName:"p"},"H2 Default")," authentication specifications."),(0,i.kt)("h4",{id:"snowflake-public"},"Snowflake Public"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"More details coming soon")),(0,i.kt)("p",null,"Specify ",(0,i.kt)("strong",{parentName:"p"},"Snowflake")," authentication details by adding the below details."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Private key vault reference"),(0,i.kt)("li",{parentName:"ul"},"Pass phrase vault reference"),(0,i.kt)("li",{parentName:"ul"},"Public user name")),(0,i.kt)("h4",{id:"gcp-application-default-credentials"},"Gcp Application Default Credentials"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Coming soon.")),(0,i.kt)("p",null,"Specify ",(0,i.kt)("strong",{parentName:"p"},"GCP")," authentication details."),(0,i.kt)("h4",{id:"username-password"},"Username password"),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Coming soon.")),(0,i.kt)("p",null,"Specify ",(0,i.kt)("strong",{parentName:"p"},"Username password")," authentication details."),(0,i.kt)("h2",{id:"create-a-runtime"},"Create a Runtime"),(0,i.kt)("p",null,"The combination of the relational mapping and the connection details are specified in the ",(0,i.kt)("strong",{parentName:"p"},"Runtime"),"."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Hit the ",(0,i.kt)("kbd",null,"+")," icon."),(0,i.kt)("li",{parentName:"ol"},"Select ",(0,i.kt)("kbd",null,"New runtime")),(0,i.kt)("li",{parentName:"ol"},"Enter the name of the Connection, for example ",(0,i.kt)("kbd",null,"H2DemoRuntime"),"."),(0,i.kt)("li",{parentName:"ol"},"Select the ",(0,i.kt)("strong",{parentName:"li"},"relational mapping")," you want to specify for your runtime, for example ",(0,i.kt)("strong",{parentName:"li"},"DemoRelationalMapping"))),(0,i.kt)("h2",{id:"more"},"More"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/showcases/showcase-projects"},"Showcase projects")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/overview/legend-features"},"Legend Features")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/overview/legend-glossary"},"Legend Glossary")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/reference/legend-language"},"Reference documentation")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/tutorials/studio-workspace"},"Studio tutorials")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/tutorials/query-builder"},"Query tutorials"))))}k.isMDXComponent=!0}}]);